<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Computation of the Balance-Sample Size Frontier in Matching Methods for Causal Inference • MatchingFrontier</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Computation of the Balance-Sample Size Frontier in Matching Methods for Causal Inference">
<meta property="og:description" content="Returns the subset of the data with the minimum imbalance for 
	     every possible subset size (N - 1, N - 2, ...), down to the data set with the 
	     minimum possible imbalance. Also includes tools for the estimation
	     of causal effects for each subset size, functions for visualization
	     and data export, and functions for calculating
	     model dependence as proposed by Athey and Imbens. ">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">MatchingFrontier</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="articles/MatchingFrontier.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="matchingfrontier-computation-of-the-balance-sample-size-frontier-in-matching-methods-for-causal-inference" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#matchingfrontier-computation-of-the-balance-sample-size-frontier-in-matching-methods-for-causal-inference" class="anchor"></a>MatchingFrontier: Computation of the Balance-Sample Size Frontier in Matching Methods for Causal Inference</h1></div>
<!-- <img src="man/figures/logo.png" align="right" width="150"/> -->
<div id="cran_status_badge-cran_downloads_badge" class="section level2">
<h2 class="hasAnchor">
<a href="#cran_status_badge-cran_downloads_badge" class="anchor"></a><a href="https://cran.r-project.org/package=MatchingFrontier"><img src="https://img.shields.io/cran/v/MatchingFrontier?color=952100" alt="CRAN_Status_Badge"></a> <a href="https://cran.r-project.org/package=MatchingFrontier"><img src="https://cranlogs.r-pkg.org/badges/MatchingFrontier?color=952100" alt="CRAN_Downloads_Badge"></a>
</h2>
<div id="overview" class="section level3">
<h3 class="hasAnchor">
<a href="#overview" class="anchor"></a>Overview</h3>
<p><code>MatchingFrontier</code> implements the methods described in King, Lucas, and Nielsen (2017) for exploring the balance-sample size frontier in observational studies, a function the relates the size of a matched subset to the covariate balance attained. Included are function to create the frontier, visualize it, and estimate treatment effects along it. In addition, functions are included to export a matched dataset at a single point on the frontier and assess model dependence for a single treatment effect estimate. <code>MatchingFrontier</code> interfaces with <code>MatchIt</code> to provide additional tools for assessing balance in matched datasets and estimating effects after matching.</p>
<p>Below is an example of using the <code>MatchFrontier</code> to examine the balance-sample size frontier for the effect of a job training program on earnings. See <code>vignette("MatchFrontier")</code> for more information on the setup and a more detailed exposition.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="st"><a href="https://projects.iq.harvard.edu/frontier">"MatchingFrontier"</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">"lalonde"</span>, package <span class="op">=</span> <span class="st">"MatchIt"</span><span class="op">)</span>

<span class="va">mahal.frontier</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/makeFrontier.html">makeFrontier</a></span><span class="op">(</span><span class="va">treat</span> <span class="op">~</span> <span class="va">age</span> <span class="op">+</span> <span class="va">educ</span> <span class="op">+</span> <span class="va">race</span> <span class="op">+</span> <span class="va">married</span> <span class="op">+</span>
                                 <span class="va">nodegree</span> <span class="op">+</span> <span class="va">re74</span> <span class="op">+</span> <span class="va">re75</span>,
                               data <span class="op">=</span> <span class="va">lalonde</span>, 
                               QOI <span class="op">=</span> <span class="st">"FSATT"</span>, 
                               metric <span class="op">=</span> <span class="st">"Mahal"</span><span class="op">)</span>

<span class="va">mahal.frontier</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co">#&gt; A matchFrontier object</span></span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="co">#&gt; - quantity of interest: FSATT</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co">#&gt; - imbalance metric: average pairwise Mahalanobis distance</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="co">#&gt; - treatment: treat</span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="co">#&gt; - covariates: age, educ, race, married, nodegree, re74, re75</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="co">#&gt; - number of points: 137</span></span></code></pre></div>
<p>Plotting the frontier provides a clear picture of the relationship between the number of units pruned in the matching and the remaining imbalance as measured by the average Mahalanobis imbalance.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">mahal.frontier</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-3-1.png" style="display: block; margin: auto;"></p>
<p>We can then estimate effects along the frontier.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">mahal.estimates</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/estimateEffects.html">estimateEffects</a></span><span class="op">(</span><span class="va">mahal.frontier</span>, 
                                   base.form <span class="op">=</span> <span class="va">re78</span> <span class="op">~</span> <span class="va">treat</span>,
                                   prop.estimated <span class="op">=</span> <span class="fl">.5</span>,
                                   verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="va">mahal.estimates</span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co">#&gt; A frontierEstimates object</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co">#&gt; - quantity of interest: FSATT</span></span>
<span id="cb5-3"><a href="#cb5-3"></a><span class="co">#&gt; - model sensitivity method: none</span></span>
<span id="cb5-4"><a href="#cb5-4"></a><span class="co">#&gt; - number of estimates: 69</span></span>
<span id="cb5-5"><a href="#cb5-5"></a><span class="co">#&gt; - treatment: treat</span></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="co">#&gt; - covariates: age, educ, race, married, nodegree, re74, re75</span></span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="co">#&gt; - outcome model: re78 ~ treat</span></span></code></pre></div>
<p>Finally, we can plot the estimates and their confidence intervals.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">mahal.estimates</span><span class="op">)</span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-5-1.png" style="display: block; margin: auto;"></p>
<p>Other tools include <code><a href="reference/generateDataset.html">generateDataset()</a></code> and <code><a href="reference/frontier_to_matchit.html">frontier_to_matchit()</a></code> for extracting a matched dataset at one point on the frontier and <code><a href="reference/modelDependence.html">modelDependence()</a></code> for computing model dependence bounds for a single estimate. See <code>vignette("MatchFrontier")</code> for a more in-depth tutorial.</p>
<p>The work in this package is based off the following paper:</p>
<p>King, Gary, Christopher Lucas, and Richard A. Nielsen. 2017. “The Balance-Sample Size Frontier in Matching Methods for Causal Inference.” <em>American Journal of Political Science</em> 61(2): 473–89.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=MatchingFrontier">https://​cloud.r-project.org/​package=MatchingFrontier</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="citation">
<h2>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html">Citing MatchingFrontier</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Gary King <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-5327-7631" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Christopher Lucas <br><small class="roles"> Author </small>  </li>
<li>Richard Nielsen <br><small class="roles"> Author </small>  </li>
<li>Noah Greifer <br><small class="roles"> Contributor, maintainer </small> <a href="https://orcid.org/0000-0003-3067-7154" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p>Developed by Gary King, Christopher Lucas, Richard Nielsen, Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
