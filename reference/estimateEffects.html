<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Estimate Effects on the Frontier — estimateEffects • MatchingFrontier</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Estimate Effects on the Frontier — estimateEffects" />
<meta property="og:description" content="estimateEffects() estimates the effect of the treatment on the supplied outcome at points along the frontier, optionally including model dependence bounds." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">MatchingFrontier</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">4.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/MatchingFrontier.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Estimate Effects on the Frontier</h1>
    
    <div class="hidden name"><code>estimateEffects.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>estimateEffects()</code> estimates the effect of the treatment on the supplied outcome at points along the frontier, optionally including model dependence bounds.</p>
    </div>

    <pre class="usage"><span class='fu'>estimateEffects</span><span class='op'>(</span><span class='va'>frontier.object</span>,
                <span class='va'>outcome</span>,
                base.form <span class='op'>=</span> <span class='cn'>NULL</span>,
                prop.estimated <span class='op'>=</span> <span class='fl'>1</span>,
                method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"none"</span>, <span class='st'>"extreme-bounds"</span>,
                           <span class='st'>"athey-imbens"</span><span class='op'>)</span>,
                model.dependence.ests <span class='op'>=</span> <span class='fl'>100</span>,
                specifications <span class='op'>=</span> <span class='cn'>NULL</span>,
                cutpoints <span class='op'>=</span> <span class='cn'>NULL</span>,
                cutpoint.method <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"mean"</span>, <span class='st'>"median"</span>,
                                    <span class='st'>"segmented"</span><span class='op'>)</span>,
                seed <span class='op'>=</span> <span class='cn'>NULL</span>,
                alpha <span class='op'>=</span> <span class='fl'>0.05</span>,
                verbose <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

<span class='co'># S3 method for frontierEstimates</span>
<span class='fu'><a href='https://rdrr.io/r/base/print.html'>print</a></span><span class='op'>(</span><span class='va'>x</span>, <span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>frontier.object</th>
      <td><p>a <code>matchFrontier</code> object; the output of a call to <code><a href='makeFrontier.html'>makeFrontier()</a></code>.</p></td>
    </tr>
    <tr>
      <th>outcome</th>
      <td><p>the name of the outcome variable in the dataset supplied to <code><a href='makeFrontier.html'>makeFrontier()</a></code>. Not required if <code>base.form</code> is supplied.</p></td>
    </tr>
    <tr>
      <th>base.form</th>
      <td><p>a model formula with the outcome on the left hand side and the treatment (and optionally covariates) on the right hand side. The model is used to estimate treatment effects at each point along the frontier as well as their model sensitivity (if requested). If omitted, will use a simple regression of the supplied outcome variable on the treatment.</p></td>
    </tr>
    <tr>
      <th>prop.estimated</th>
      <td><p>the proportion of points along the frontier to estimate. Should be a value between 0 and 1. Estimating effects at every point on the frontier can be time-consuming for large frontiers, especially when model dependence bounds are also computed, so using values less than 1 can save time at the expense of providing less detail in the frontier estimates plot.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>the method of computing model dependence bounds. Can be one of <code>"extreme-bounds"</code> or <code>"athey-imbens"</code> for the extreme bounds or Athey-Imbens procedures, respectively, or <code>"none"</code> to not compute model dependence bounds. Abbreviations allowed. Default is no model dependence bounds. See <code><a href='modelDependence.html'>modelDependence()</a></code>.</p></td>
    </tr>
    <tr>
      <th>model.dependence.ests, specifications, cutpoints, cutpoint.method, seed</th>
      <td><p>arguments passed to <code><a href='modelDependence.html'>modelDependence()</a></code> when <code>method</code> is not <code>"none"</code>.</p></td>
    </tr>
    <tr>
      <th>alpha</th>
      <td><p>the alpha value used to select the critical test statistic used in computing confidence intervals. Default is .05 for pointwise 95% confidence intervals.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p><code>logical</code>; whether to print additional information about the process of estimating effects and sensitivity bounds (if requested). A progress bar will be displayed if <code>TRUE</code>.</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>a <code>frontierEstimates</code> object; the output of a call to <code>estimateEffects()</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>ignored.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>estimateEffects()</code> works by creating a dataset at each point along the frontier using the units that remain and fitting the supplied outcome model to those datasets, returning the point estimate, confidence interval bounds, and, if requested, model dependence bounds. The outcome model fit is that supplied to <code>base.form</code>, and the coefficient on the treatment is used at the treatment effect estimate. Currently, only linear models can be used and the treatment effect corresponds to the difference in means.</p>
<p>Confidence intervals are computed using HC3 robust standard errors as implemented in <span class="pkg">sandwich</span>. Note that robust standard errors may not be accurate for matching with replacement; only the Abadie-Imbens (2006) standard errors implemented in the <span class="pkg">Matching</span> package are accurate. Including covariates in the outcome model improves the performance of the standard errors, and so is recommended here and in general (Hill &amp; Reiter, 2006).</p>
<p>The model dependence bounds are computed using the same machinery as is used with <code><a href='modelDependence.html'>modelDependence()</a></code> and uses many of the same arguments.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code>frontierEstimates</code> object with the following components:</p>
<dt>Xs</dt><dd><p>a vector containing the cumulative number of units dropped at each point on the frontier for which effects were estimated. The first value will be 0.</p></dd>
<dt>coefs</dt><dd><p>a vector containing the treatment effect estimates at each point on the frontier for which effects were estimated.</p></dd>
<dt>CIs</dt><dd><p>a list containing the upper and lower confidence interval limits at each point on the frontier for which effects were estimated.</p></dd>
<dt>mod.dependence</dt><dd><p>a list containing the upper and lower model dependence bounds at each point on the frontier for which effects were estimated.</p></dd>
<dt>QOI</dt><dd><p>the argument supplied to <code>QOI</code> in the original call to <code><a href='makeFrontier.html'>makeFrontier()</a></code>.</p></dd>
<dt>method</dt><dd><p>the argument supplied to <code>method</code>.</p></dd>
<dt>n</dt><dd><p>the number of units present at the first point in the frontier (i.e., the original sample). For the FSATT, this is the number of treated units; for the SATT, this is the number of control units.</p></dd>
<dt>treatment</dt><dd><p>the name of the treatment variable.</p></dd>
<dt>covariates</dt><dd><p>the names of the covariates matched on in the original call to <code><a href='makeFrontier.html'>makeFrontier()</a></code>.</p></dd>
<dt>base.form</dt><dd><p>the formula used for the outcome models.</p></dd>
<dt>un</dt><dd><p>a list contain three elements computed in the unadjusted sample: the effect estimate (<code>coef</code>), the confidence interval (<code>CI</code>), and the model dependence bounds (<code>mod.dependence</code>).</p></dd>
<dt>call</dt><dd><p>the original function call.</p></dd>

If method = "extreme-bounds", the output will additionally have the attribute "specifications" containing the model specifications that were used in computing the model dependence bounds.

    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Abadie, A., &amp; Imbens, G. W. (2006). Large Sample Properties of Matching Estimators for Average Treatment Effects. Econometrica, 74(1), 235-267. https://doi.org/10.1111/j.1468-0262.2006.00655.x</p>
<p>Hill, J., &amp; Reiter, J. P. (2006). Interval estimation for treatment effects using propensity score matching. Statistics in Medicine, 25(13), 2230-2256. https://doi.org/10.1002/sim.2277</p>
<p>King, G., Lucas, C., &amp; Nielsen, R. A. (2017). The Balance-Sample Size Frontier in Matching Methods for Causal Inference. <em>American Journal of Political Science</em>, 61(2), 473-489. doi: <a href='https://doi.org/10.1111/ajps.12272'>10.1111/ajps.12272</a></p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='makeFrontier.html'>makeFrontier()</a></code> for constructing the frontier, <code><a href='plot.frontierEstimates.html'>plot.frontierEstimates()</a></code> for plotting effect estimates and bounds along the frontier, <code><a href='generateDataset.html'>generateDataset()</a></code> for extracting a dataset at one point on the frontier, <code><a href='modelDependence.html'>modelDependence()</a></code> for computing model dependence bounds for a single dataset, <code><a href='https://kosukeimai.github.io/MatchIt/articles/estimating-effects.html'>vignette("estimating-effects", package = "MatchIt")</a></code> for instructions on estimating effects after matching.</p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"lalonde"</span>, package <span class='op'>=</span> <span class='st'>"MatchIt"</span><span class='op'>)</span>

<span class='co'>#Pair distance frontier for FSATT</span>
<span class='va'>f1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='makeFrontier.html'>makeFrontier</a></span><span class='op'>(</span><span class='va'>treat</span> <span class='op'>~</span> <span class='va'>age</span> <span class='op'>+</span> <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>married</span> <span class='op'>+</span> <span class='va'>re74</span>,
                   data <span class='op'>=</span> <span class='va'>lalonde</span>,
                   QOI <span class='op'>=</span> <span class='st'>"FSATT"</span>,
                   metric <span class='op'>=</span> <span class='st'>"Mahal"</span><span class='op'>)</span>

<span class='va'>f1</span>
</div><div class='output co'>#&gt; A matchFrontier object
#&gt; - quantity of interest: FSATT
#&gt; - imbalance metric: average pairwise Mahalanobis distance
#&gt; - treatment: treat
#&gt; - covariates: age, educ, married, re74
#&gt; - number of points: 100</div><div class='input'>
<span class='va'>e1</span> <span class='op'>&lt;-</span> <span class='fu'>estimateEffects</span><span class='op'>(</span><span class='va'>f1</span>,
                      base.form <span class='op'>=</span> <span class='va'>re78</span> <span class='op'>~</span> <span class='va'>treat</span> <span class='op'>+</span> <span class='va'>age</span> <span class='op'>+</span>
                                    <span class='va'>educ</span> <span class='op'>+</span> <span class='va'>married</span> <span class='op'>+</span> <span class='va'>re74</span>,
                      prop.estimated <span class='op'>=</span> <span class='fl'>.2</span>, <span class='co'>#Should be higher</span>
                      method <span class='op'>=</span> <span class='st'>"extreme-bounds"</span>,
                      model.dependence.ests <span class='op'>=</span> <span class='fl'>51</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Getting extreme bounds model specifications...
#&gt; Estimating effects...
#&gt;   |                                                                              |                                                                      |   0%  |                                                                              |====                                                                  |   5%  |                                                                              |=======                                                               |  10%  |                                                                              |==========                                                            |  15%  |                                                                              |==============                                                        |  20%  |                                                                              |==================                                                    |  25%  |                                                                              |=====================                                                 |  30%  |                                                                              |========================                                              |  35%  |                                                                              |============================                                          |  40%  |                                                                              |================================                                      |  45%  |                                                                              |===================================                                   |  50%  |                                                                              |======================================                                |  55%  |                                                                              |==========================================                            |  60%  |                                                                              |==============================================                        |  65%  |                                                                              |=================================================                     |  70%  |                                                                              |====================================================                  |  75%  |                                                                              |========================================================              |  80%  |                                                                              |============================================================          |  85%  |                                                                              |===============================================================       |  90%  |                                                                              |==================================================================    |  95%  |                                                                              |======================================================================| 100%
#&gt; Done!</div><div class='input'><span class='va'>e1</span>
</div><div class='output co'>#&gt; A frontierEstimates object
#&gt; - quantity of interest: FSATT
#&gt; - model sensitivity method: extreme bounds
#&gt;    - number of specifications: 51
#&gt; - number of estimates: 20
#&gt; - treatment: treat
#&gt; - covariates: age, educ, married, re74
#&gt; - outcome model: re78 ~ treat + age + educ + married + re74</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>e1</span>, band <span class='op'>=</span> <span class='st'>"model-dependence"</span><span class='op'>)</span>
</div><div class='img'><img src='estimateEffects-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/plot.default.html'>plot</a></span><span class='op'>(</span><span class='va'>e1</span>, band <span class='op'>=</span> <span class='st'>"confidence"</span><span class='op'>)</span>
</div><div class='img'><img src='estimateEffects-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Gary King, Christopher Lucas, Richard Nielsen, Noah Greifer.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


